{% extends 'base.html' %}
{% block title %}
Employee Page
{%endblock%}
{% block content %}
<div class="row" style="margin-top:20px; margin-left:20px; margin-right: 5px;">
<div class="col-12">
    <div class="text-center">
        <h1>Employees</h1>
    </div>
    {% if session['role']=='admin' %}
    <p>Click on edit button to edit employee details</p>
    {% endif %}
    <br>
    {{ pagination.info }}
    {{ pagination.links }}
    <table class="table table-striped table-bordered table-hover table-dark">
        <thead>
            <tr>
                <!-- Your Columns HERE -->
                <th scope="col">Full Name</th>
                <th scope="col">Email Address</th>
                <!-- below data will only be displayed if user is admin role -->
                {% if session['role']=='admin' %} 
                <th scope="col">Date of birth</th>
                <th scope="col">Address</th>
                <th scope="col">Role</th>
                {% endif %}
                <th scope="col">Phone Number</th>
            </tr>
        </thead>
        <tbody>
            <!-- Your rows inside the table HERE: -->
            {% for emp in employee %}
            <tr>
                <td>{{ emp.FirstName+ " "+emp.LastName }}</td>
                <td>{{ emp.email_address }}</td>
                {% if session['role']=='admin' %}
                <td>{{ emp.dateofbirth }}</td>
                <td>{{ emp.address }}</td>
                {% if emp.employee_role == 1 %}
                <td>Admin</td>
                {% elif  emp.employee_role == 2 %}
                <td>Employee</td>
                {% else %}
                <td>None</td>
                {%endif%}
                {% endif %}
                <td>{{ emp.phonenumber }}</td>
                <td>
                    {% if session['role']=='admin' %}
                    {% include 'includes/delete_employee_modals.html' %}
                    <form method="post"  >
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <input id="employee-name" name="employee-name" type="hidden" value={{emp.email_address}}>
                        <button type="submit" class="btn btn-outline btn-info btn-sm" value="Register"><img id="editButton" 
                            src="https://fontawesomeicons.com/images/png/black/edit/outline-4x.png"></button>
                    </form>
                    <button class="btn btn-outline btn-danger btn-sm" data-toggle="modal" data-target="#Modal-Delete-Employee-{{ emp.FirstName }}">
                        <img id="deleteButton" 
                                    src="https://fontawesomeicons.com/images/png/black/delete/outline-4x.png"></button>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {{ pagination.links }}
</div>
{% endblock %}